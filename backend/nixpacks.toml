[phases.setup]
nixPkgs = ["maven", "jdk21"]

[phases.build]
cmds = [
  "chmod +x ./mvnw || true",
  "./mvnw clean package -DskipTests"
]

[phases.start]
# Usar el script de inicio que busca el JAR automáticamente
cmd = "./start.sh"

[variables]
# Railway asigna PORT automáticamente, no configurar SERVER_PORT
# CORS_ALLOWED_ORIGINS debe configurarse en Railway con: https://pet-gallery.alejandrotech.eu
CORS_ALLOWED_ORIGINS = "http://localhost:3000,https://pet-gallery.alejandrotech.eu"

